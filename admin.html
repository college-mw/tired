<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Course Management</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #fff;
            color: #000;
        }
        main {
            max-width: 800px;
            margin: 0 auto;
            padding: 1em;
        }
        h1, h2, h3, h4, h5 {
            color: #000;
        }
        input, textarea, select, button {
            width: 100%;
            padding: 0.5em;
            margin: 0.5em 0;
            box-sizing: border-box;
        }
        button {
            background-color: #FFB81C;
            color: #000;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <main class="container">
        <h1>Admin Dashboard</h1>

        <div>
            <h2>Create New Course</h2>
            <form id="create-course-form">
                <div>
                    <label for="course-title">Course Title:</label>
                    <input type="text" id="course-title-input" required>
                </div>
                <div>
                    <label for="course-code">Course Code:</label>
                    <input type="text" id="course-code-input" placeholder="e.g., CS101" required>
                </div>
                <div>
                    <label for="course-description">Course Description:</label>
                    <textarea id="course-description-input" required></textarea>
                </div>
                <div>
                    <label for="course-credits">Credit Hours:</label>
                    <input type="number" id="course-credits-input" min="0" step="0.5" required>
                </div>
                <div>
                    <label for="course-modules">Legacy Module Titles (one title per line, will be placed in a default 'Modules' section):</label>
                    <textarea id="course-modules-input" placeholder="Introduction to Topic A\nAdvanced Topic B\nPractical Applications"></textarea>
                </div>
                <div>
                    <label for="course-creation-term-select">Assign to Academic Term:</label>
                    <select id="course-creation-term-select" required>
                        <option value="">-- Select Term --</option>
                        <!-- Terms will be populated by JavaScript -->
                    </select>
                </div>
                <button type="submit">Create Course</button>
            </form>
            <p id="create-course-message"></p>
        </div>

        <div>
            <h2>Manage Course Content</h2>
            <div>
                <div>
                    <label for="admin-course-select">Select Course to Manage:</label>
                    <select id="admin-course-select">
                        <option value="">-- Select a Course --</option>
                        <!-- Courses will be populated by JS -->
                    </select>
                </div>

                <div id="course-content-editor" class="hidden">
                    <h3 id="editing-course-title"></h3>
                    <button id="delete-course-btn">Delete This Course</button>
                    <div id="course-sections-container">
                        <!-- Sections will be rendered here by JS -->
                    </div>
                    <div>
                        <h4>Add New Section</h4>
                        <form id="add-section-form">
                            <input type="text" id="new-section-title" placeholder="Enter new section title (e.g., Semester 1)" required>
                            <button type="submit">Add Section</button>
                        </form>
                    </div>
                </div>

                <!-- Templates for adding content to sections -->
                <div id="content-templates" class="hidden">
                    <div>
                        <h5>Add New Video</h5>
                        <input type="text" placeholder="Video Title" required>
                        <input type="url" placeholder="https://youtube.com/watch?v=..." required>
                        <button type="button" data-type="video">Add Video</button>
                    </div>
                    <div>
                        <h5>Add New PDF</h5>
                        <input type="text" placeholder="PDF Document Title" required>
                        <input type="url" placeholder="https://example.com/document.pdf" required>
                        <button type="button" data-type="pdf">Add PDF</button>
                    </div>
                    <div>
                        <h5>Add New Module</h5>
                        <input type="text" placeholder="Module Title" required>
                        <textarea placeholder="Module content..."></textarea>
                        <button type="button" data-type="module">Add Module</button>
                    </div>
                </div>
            </div>
        </div>

        <div>
            <h2>User Management</h2>
            <div>
                <div>
                    <label for="admin-user-select">Select User:</label>
                    <select id="admin-user-select">
                        <option value="">Loading users...</option>
                    </select>
                </div>

                <div id="admin-selected-user-details" class="hidden">
                    <h3 id="admin-selected-user-name"></h3>

                    <h4>Fees Management</h4>
                    <p>Current Fees Balance: <strong id="admin-selected-user-fees">N/A</strong></p>
                    <div>
                        <label for="admin-new-fees-amount">Set New Amount:</label>
                        <input type="number" id="admin-new-fees-amount" placeholder="e.g., 27500" step="any">
                    </div>
                    <div>
                        <label for="admin-new-fees-currency">Currency:</label>
                        <input type="text" id="admin-new-fees-currency" value="MWK">
                    </div>
                    <button id="admin-update-fees-btn">Update Fees</button>
                    <p id="admin-update-fees-message"></p>

                    <h4>Enrollment Approvals</h4>
                    <div id="admin-pending-enrollments">
                        <p>Select a user to see pending enrollments.</p>
                    </div>
                </div>
            </div>
        </div>

        <div>
            <h2>Post Platform Update/Announcement</h2>
            <div>
                <form id="platform-update-form">
                    <div>
                        <label for="platform-update-message">Message:</label>
                        <textarea id="platform-update-message" rows="4" required></textarea>
                    </div>
                    <button type="submit">Post Platform Update</button>
                </form>
                <p id="platform-update-status"></p>
            </div>
        </div>

        <div>
            <h2>Academic Term Management</h2>
            <div>
                <form id="create-term-form">
                    <div>
                        <label for="term-name">Term Name:</label>
                        <input type="text" id="term-name" placeholder="e.g., Fall 2024" required>
                    </div>
                    <div>
                        <label for="term-year">Year:</label>
                        <input type="number" id="term-year" placeholder="e.g., 2024" min="2000" max="2100" required>
                    </div>
                    <div>
                        <label for="term-type">Type:</label>
                        <select id="term-type" required>
                            <option value="">-- Select Type --</option>
                            <option value="Fall">Fall</option>
                            <option value="Spring">Spring</option>
                            <option value="Summer">Summer</option>
                            <option value="Winter">Winter</option>
                            <option value="FullYear">Full Year</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label for="term-start-date">Start Date:</label>
                        <input type="date" id="term-start-date" required>
                    </div>
                    <div>
                        <label for="term-end-date">End Date:</label>
                        <input type="date" id="term-end-date" required>
                    </div>
                    <button type="submit">Create Academic Term</button>
                </form>
                <p id="term-create-status"></p>

                <h3>Existing Academic Terms</h3>
                <ul id="existing-terms-list">
                    <li>Loading terms...</li>
                </ul>
            </div>
        </div>
    </main>
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>
